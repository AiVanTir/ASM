# Лабораторная работа №4 — Разложение в ряд (Вариант №15)

**Задача:** вычислить значение функции в точке при помощи разложения в ряд для выражения
\( \sin^3 x \). Программа считает значение **по ряду** до достижения заданной точности
и сравнивает его с прямым вычислением \( \sin(x)^3 \) через библиотечную функцию `sin`.

Формула ряда:
\[
\sin^3 x = \frac{3}{4}\sum_{n=1}^{\infty}(-1)^{n+1}\,\frac{3^{2n}-1}{(2n+1)!}\,x^{2n+1}.
\]

---

## Что делает программа

- Читает из **stdin** два `double`: `x` и `ε` (точность).
  Перед чтением выводит приглашение:
  ```
  Enter x and accuracy separated by space
  ```
- Требует **один аргумент командной строки** — путь к файлу, куда будут записаны члены ряда.
  При отсутствии аргумента печатает:
  ```
  Invalid args: output file expected
  ```
- Открывает указанный файл **в режиме перезаписи** (`"w"`) и записывает **каждый член ряда**
  в формате:
  ```
  n value
  ```
  где `n` — номер члена (начиная с 1), `value` — значение члена (тип `double`).
- Суммирует члены, пока **|aₙ| > ε**. После завершения печатает в `stdout` строку:
  ```
  Series:  <sum>; Std: <sin(x)^3>
  ```

Используемые функции: `sin`, `printf`, `scanf`, `fopen`, `fclose`, `fprintf` (линковка с `libm`).

Тип данных для вещественных чисел — `double`.

---

## Структура проекта

```
.
├── lab.s        # исходный код NASM x86-64
├── Makefile     # сборка: nasm → ld (статическая линковка с libc/libm)
└── output.txt   # пример файла с членами ряда
```

---

## Сборка

Требования: Linux x86‑64, `nasm`, `ld` (binutils).

```bash
make
# создаётся исполняемый файл ./lab
```

---

## Запуск

Ожидается один аргумент — путь к файлу для записи членов ряда.

```bash
./lab output.txt
Enter x and accuracy separated by space
1.0 1e-6
Series:  0.708073; Std: 0.708073
```

Файл `output.txt` будет содержать пары `n value`, например:

```
1 3.869893
2 -4.769450
3 2.547180
...
```

> Формат вывода чисел (`%lf` в `printf`/`fprintf`) — по умолчанию с 6 знаками после запятой.

---

## Обработка ошибок

- Неверные аргументы командной строки → сообщение `Invalid args: output file expected`.
- Ошибка открытия файла → `Unable to open file`.
- Неверный ввод или `ε ≤ 0` → `Invalid input`.

Коды возврата:
- `0` — успешное завершение;
- `1` — ошибка ввода.

---

## Примечания

- Программа использует **статическую линковку** (`-static`) с `libc`/`libm` (см. `Makefile`).
- Диапазон `x` не ограничен (кроме ограничений типа `double`).
