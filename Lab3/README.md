# Лабораторная работа №3 — Обработка строк (Вариант №34)

В каждом **слове** каждой строки входного файла выполнить **циклический сдвиг влево** на `N` символов.  
Результат печатается в стандартный поток вывода (на экран).

---

## Содержание
- [Постановка задачи](#постановка-задачи)
- [Как это работает](#как-это-работает)
- [Ввод/вывод и параметры](#вводвывод-и-параметры)
- [Структура проекта](#структура-проекта)
- [Сборка и запуск](#сборка-и-запуск)
- [Примеры](#примеры)
- [Ограничения текущей реализации](#ограничения-текущей-реализации)
- [Тест-кейсы](#тест-кейсы)
- [Обработка ошибок](#обработка-ошибок)
- [Полезные команды](#полезные-команды)

---

## Постановка задачи

Для каждой строки входного файла преобразовать **каждое слово**: выполнить **циклический сдвиг влево** на `N` символов.  
Разделители **сохраняются как во входном файле**: каждый встреченный пробел и перевод строки печатаются без изменений. Табуляции не обрабатываются.

**Определения**
- **Строка** — последовательность символов до символа перевода строки (`\n`).
- **Слово** — последовательность непробельных символов, ограниченная разделителями (пробел/таб).

---

## Как это работает

Для слова `w` длины `L` сдвиг на `N` символов вычисляется как `k = N mod L`, после чего:

```
rotate_left(w, N) = w[k..L-1] + w[0..k-1]
```

Пример: `rotate_left("hello", 2) → "llohe"`.

Реализация выполнена на **NASM x86-64** и использует только **системные вызовы Linux** (`read`, `write`, `open`, `close`, `exit`) без сторонних библиотек.

---

## Ввод/вывод и параметры

- **Ввод данных:** текстовый файл. Путь к файлу вводится пользователем в диалоге.
- **Параметры:** целое `N` — величина сдвига, вводится пользователем.
- **Вывод данных:** стандартный поток вывода (терминал).

Фрагмент диалога:
```
Введите имя файла: ./input.txt
Введите N для сдвига: 2
```

---

## Структура проекта

```
.
├── lab3.asm     # основной исходный код (NASM, x86-64)
├── Makefile     # сборка: nasm + ld
└── input.txt    # пример входных данных
```

---

## Сборка и запуск

Требования: Linux x86‑64, `nasm`, `ld` (binutils).

```bash
# Сборка (используется Makefile)
make

# Запуск
./lab3

# Очистка артефактов сборки
make clean
```

> По умолчанию бинарник называется `lab3` (см. `TARGET` в Makefile).

---

## Примеры

**Пример входного файла** (`input.txt`):
```
Hello world suffering on 12th department
```

**Пример сеанса**
```
$ ./lab3
Введите имя файла: input.txt
Введите N для сдвига: 2
lloHe rldwo fferingsu on th12 partmentde
```

Пояснения:
- `Hello` → `lloHe`
- `world` → `rldwo`
- `suffering` → `fferingsu`
- `on` (L=2, N=2 → k=0) → `on`
- `12th` → `th12`
- `department` → `partmentde`

---

## Ограничения текущей реализации

- Размер **входного буфера**: `256` байт (`BUF_SIZE`).
- Максимальная **длина слова**: `64` символа (`MAX_WORD`).  
  Слова длиннее `MAX_WORD` (64) обрабатываются **порционно по фрагментам до 64 символов**; каждый фрагмент циклически сдвигается **независимо** и выводится подряд.
- Разделители: **пробел** (`' '`) и **перевод строки** (код `10`). Символы пунктуации **внутри** слова считаются частью слова и тоже циклически сдвигаются.

Значения констант можно изменить в начале `lab3.asm` при необходимости.

---

## Тест-кейсы

| `N` | Входная строка                 | Ожидаемый вывод            |
|-----|--------------------------------|----------------------------|
| 0   | `hello   world`                | `hello   world`            |
| 1   | `ab  cd`                       | `ba dc`                    |
| 2   | `abc def`                      | `cab efd`                  |
| 2   | `Hello world`                  | `lloHe rldwo`              |
| 5   | `a   b   c`                    | `a   b   c`                |
| 3   | *(пустая строка)*              | *(пустая строка)*          |

---

## Обработка ошибок

Программа выводит понятное сообщение и завершает работу с ненулевым кодом, если:
- файл не найден / нет прав доступа;
- невозможно корректно прочитать `N`;
- произошла ошибка ввода/вывода.

Пример сообщения:
```
Ошибка при открытии файла
```

---

## Полезные команды

```bash
# Проверить, что nasm установлен
nasm -v

# Собрать проект заново
make clean && make

# Прогнать с тестовым файлом
echo "hello   world" > input.txt && ./lab3
```

